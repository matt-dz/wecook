# =============================================================================
# WeCook Backend Environment Variables
# =============================================================================
#
# This file contains environment variables for configuring the WeCook backend.
# Copy this file to .env.backend and update with your values.
#
# Note: YAML configuration (wecook.yaml) is the recommended method.
# If /data/wecook.yaml exists, it takes precedence over environment variables.
#
# =============================================================================

# =============================================================================
# Application Settings
# =============================================================================

# Environment mode: PROD or DEV
# - PROD: Production mode with stricter security
# - DEV: Development mode (default)
ENV=DEV

# Application host URL used for CORS, cookies, and invite links
# Required in production. Must be a valid URL.
# Examples: https://wecook.example.com, http://localhost:8080
HOST_ORIGIN=http://localhost:8080

# =============================================================================
# Application Secret (JWT Signing Key)
# =============================================================================

# JWT signing secret (optional)
# If not set, a secure random secret will be auto-generated and saved to APP_SECRET_PATH
# If providing your own secret, it must be at least 32 bytes
# Example: openssl rand -base64 32
APP_SECRET=

# Path where the auto-generated secret will be stored
# Only used if APP_SECRET is not provided
APP_SECRET_PATH=/data/secret

# Version identifier for the secret (used for key rotation)
# Change this when rotating secrets to invalidate old tokens
APP_SECRET_VERSION=1

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL hostname (required)
# In Docker Compose, use the service name (e.g., "wecook-database")
DATABASE_HOST=wecook-database

# PostgreSQL port (default: 5432)
DATABASE_PORT=5432

# Database name (required)
DATABASE=wecook

# Database username (required)
DATABASE_USER=wecook

# Database password (required)
# Generate a secure password: openssl rand -base64 32
# Important: This must match POSTGRES_PASSWORD in .env.database
DATABASE_PASSWORD=secure-password

# =============================================================================
# File Storage
# =============================================================================

# Directory path where uploaded files (recipe images, etc.) will be stored
# This should be a persistent volume in production
FILESERVER_VOLUME=/data/files

# URL prefix for serving files
# Files will be accessible at {HOST_ORIGIN}{FILESERVER_URL_PREFIX}/{filename}
FILESERVER_URL_PREFIX=/files

# =============================================================================
# Admin User Setup
# =============================================================================
# These credentials are used to create an initial admin user on first startup
# If an admin already exists in the database, these settings are ignored
#
# Important: All fields required together - if you set ADMIN_EMAIL and
# ADMIN_PASSWORD, you must also set ADMIN_FIRST_NAME and ADMIN_LAST_NAME

# Admin first name
ADMIN_FIRST_NAME=John

# Admin last name
ADMIN_LAST_NAME=Doe

# Admin email address (must be valid email format)
# This will be the login username
ADMIN_EMAIL=admin@example.com

# Admin password
# Requirements:
# - At least 10 characters
# - Must contain: uppercase letter, lowercase letter, number, special character
# Example: SecureP@ssw0rd123!
ADMIN_PASSWORD=Change-m3!

# =============================================================================
# Email Configuration (Optional)
# =============================================================================
# Required only if you want to send user invitation emails
# Leave fields empty to disable email functionality

# SMTP server hostname
# Examples: smtp.gmail.com, smtp.sendgrid.net, smtp.mailgun.org
SMTP_HOST=smtp.example.com

# SMTP server port (default: 587)
# Common ports:
# - 587: STARTTLS (recommended)
# - 465: Implicit TLS
# - 25: No TLS (not recommended)
SMTP_PORT=587

# SMTP username for authentication
SMTP_USERNAME=user@example.com

# SMTP password for authentication
SMTP_PASSWORD=your-smtp-password

# Email address to use as the sender
# Example: noreply@your-domain.com
SMTP_FROM=noreply@example.com

# TLS mode: auto, starttls, implicit, or none
# - auto: Uses STARTTLS on port 587, implicit TLS on 465, no TLS otherwise (default)
# - starttls: Always use STARTTLS (recommended for port 587)
# - implicit: Use implicit TLS (recommended for port 465)
# - none: No TLS (not recommended for production)
SMTP_TLS_MODE=auto

# Skip TLS certificate verification (DANGEROUS - development only)
# Set to true only for testing with self-signed certificates
# Never use in production
SMTP_TLS_SKIP_VERIFY=false
